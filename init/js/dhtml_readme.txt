
=========================\
	Общие замечания	 |
================================================================================

0. Основная либа - dhtml.js. Должна быть подключена первой, сразу после 
тега <BODY>, а срзу за ней - скрипт непосредственно с инициализацией чего-либо 
(меню, ролловера). 

Например:
---------
<body ...>
<script language=javascript src="dhtml.js"></script>
<script language=javascript src="rollover.js"></script>


1. Все функции-конструкторы лучше вызывать без оператора "new" (но с ним тоже 
можно), как и стандартные.

Например:
---------
var standart_array1=new Array(...)
var standart_array2=Array(...)
var my_rollover1=new Rollover(...)
var my_rollover2=Rollover(...)


2. У "основных" конструкторов Rollover и DropDownMenu есть 1-й параметр name - 
имя, который НЕ обязательно должен совпадать с именем переменной-объекта,
и вообще эта переменная необязательна.

Например:
---------
var roll1ex=Rollover("roll1ex",...)	// имена совпадают
var roll2eX=Rollover("roll2ex",...)	// имена не совпадают
Rollover("roll3ex",...)			// переменная отсутствует

Это имеет такой смысл: при инициализации автоматически создаются глобальные 
объекты (точнее, это свойства объекта window) ROLL и MENU, и создаваемые 
ролловеры и меню автоматически становятся свойством этих объектов (кстати, 
поэтому ролловеры и меню могут иметь одинаковые имена), в примерере это:

ROLL.roll1ex, ROLL.roll2ex (но не ROLL.roll2eX !), ROLL.roll3ex,

и к ним по этим именам можно обращаться:
ROLL.roll1ex.Switch(1,1), ROLL.roll3ex.Switch(0,1).

Если же есть переменные, то можно обращаться через них (вообще-то они только 
для краткости записи и нужны в принципе):
roll1ex.Switch(1,1), roll2eX.Switch(0,1)  (но не roll3ex.Switch(0,1)).


Примечание:
-----------

Описанные правила верны и для ролловеров, и для меню, и продемонстрированы 
в примерах.


=================\
	Роловер  |
================================================================================

1. Объект Rollover - используется для создания ролловера, в т.ч. и в меню.
--------------------------------------------------------------------------

Rollover(name,dir,current,disable_roll_current,
	imgs_off,imgs_on,imgs_off_current,imgs_on_transparent,
	nn_document,preload)

  name - имя ролловера (см. выше). Кроме того, все рисунки ролловера ОБЯЗАТЕЛЬНО 
	должны иметь имена "<имя ролловера><номер рисунка>" (без пробела), причем 
	нумерация начинается с нуля: roll1ex0, roll1ex1, roll1ex2, ...
  dir - путь к рисункам (папка), например, "images".
  current - номер "текущего" пункта меню (начиная с 0-ля) - нужно, если текущий пункт 
	выделяется - имеет другой рисунок-шапку.
  disable_roll_current - если 1 - то "текущий" рисунок ролловериться не будет.
  imgs_off - массив с именами файлов рисунков для ролловера в состоянии Off
  imgs_on - массив с именами файлов рисунков для ролловера в состоянии On
  imgs_off_current - (опционально) массив с именами файлов рисунков для ролловера 
	в состоянии Off, в котором заданы рисунки для "текущих" пунктов;
	реально из этого массива будет использован только один рисунок, 
	соответствующий current;
	если этот параметр не задан или равен 0, то использоваться не будет.
  imgs_on_transparent - (опционально) альтернативный массив с именами файлов рисунков 
	для ролловера в состоянии On, с имитацией прозрачности; если дан, будет 
	использоваться только в ИЕ, в НН будет по-прежнему использоваться img_on;
	если указан 0, то также использоваться не будет;
	применение возможно для меню с эффектом прозрачности.
  nn_document - (опционально) имя объекта document (строка), рисунок из которого 
	будет браться в НН; применяется когда надо ролловерить рисунки 
	внутри слоя, например: "document.menu0.document"
  preload - (опционально) если дано и равно 0, нужные для ролловера рисунки 
	автоматически не презагрузятся, и это потом можно будет сделать вручную;
	по умолчанию презагрузка включена.

Методы:
-------
preload() - ручная подзагрузка рисунков, например "roll1ex.preload()".
Switch(num,pos,nn_document) - сделать ролловер.
  name - номер рисунка, начиная с 0-ля.
  pos - (опционально) позиция для ролловера: если дано и не равно 0, то в On,
	иначе (в т.ч. по умолчанию) - в Off.
  nn_document - (опционально) если задан, то при данном переключении заменяет 
	этот параметр, заданный при вызове конструктора


==============\
	Меню  |
================================================================================

1. Объект Item - используется в меню, непосредственно элемент меню.
-------------------------------------------------------------------

Item(text,href,target,
	bgColor,hoverColor,headHTML,tailHTML,linkClass,linkAttrs,beforeHTML,afterHTML,
	subMenu)

  text - текст (HTML-код) в элементе меню, выводимый внутри ссылки.
  href - (опционально) URL ссылки, если отсутствует или пустой, то ссылки 
	не будет, просто выведется текст.
  target - (опционально) target для ссылки.
  bgColor - (опционально) - цвет фона элемента меню в состоянии Off.
  hoverColor - (опционально) - цвет фона элемента меню в состоянии On.
  headHTML - (опционально) HTML-код в элементе меню, выводимый перед ссылкой.
  tailHTML - (опционально) HTML-код в элементе меню, выводимый после ссылки.
  linkClass - (опционально) класс ссылки.
  linkAttrs - (опционально) html-атрибуты ссылки, например, можно прицепить 
	стиль или JS-обработчики событий к ссылке: 
		"style='text-decoration:none' onClick=alert('Right choice!')"
  beforeHTML - (опционально) HTML-код, выводимый перед элементом меню.
  afterHTML - (опционально) HTML-код, выводимый после элемента меню.
  subMenu - (опционально) объект SubMenu - подменю данного элемента.

Внимание:
---------

1) Если строчный атрибут bgColor имеет не строчное значение (например, 0, null 
или не задан), то:
  - для элемента верхнего уровня, он наследует значение этого же атрибута 
    (bgColor), заданное для всего меню;
  - для элемента подменю, он принимает пустое значение ('').
Если в конечном итоге этот параметр имеет пустое значение, то элемент имеет 
прозрачный фон, и его результирующий фон - тот же, что у подложки, т.е.:
  - для элемента верхнего уровня, фон страницы в этом месте;
  - для элемента подменю, фон этого подменю.

2) Если строчные атрибуты hoverColor,headHTML,tailHTML,linkClass,linkAttrs
имеют не строчное значение (например, 0, null или не заданы), то они наследуют 
значения соответствующих групповых атрибутов, заданных для элементов, их 
содержащих, а именно:
  - для элемента верхнего уровня, значения атрибутов 
    hItemHoverColor,hItemHeadHTML,hItemTailHTML,hItemLinkClass,hItemLinkAttrs,
    заданные для меню;
  - для элемента подменю, значения этих же атрибутов 
    (itemHoverColor,itemHeadHTML,itemTailHTML,itemLinkClass,itemLinkAttrs),
    заданные для содержащего этот элемент подменю, либо, если те в свою очередь
    имеют не строчное значение (0, null или не заданы) - то значения этих же 
    атрибутов, заданные для меню.

3) Если в конечном итоге параметр hoverColor имеет пустое значение, то элемент 
не имеет подсветки, т.е. не меняет цвет фона, когда активен.

--------------------------------------------------------------------------------

2. Объект SubMenu - используется в меню, выпадающий блок (подменю).
-------------------------------------------------------------------

  SubMenu(left,top,width,bgColor,hoverColor,headHTML,tailHTML,itemDelimHTML,
	itemHoverColor,itemHeadHTML,itemTailHTML,itemLinkClass,itemLinkAttrs,
	rollover,items)
    или
  SubMenu(direction,alignment,...) 

  left,top - координаты X,Y левого верхнего угла блока на странице, если эти 
	параметры - числа.
    или 
  direction,alignment - направление выпадения и выравнивание блока, если эти 
	параметры - строки; подробнее см. ниже описания объекта меню.
  width - ширина блока
  bgColor - цвет фон блока
  hoverColor - цвет фона блока при наведении на него
  headHTML - HTML-код, выводимый в начале блока, перед всеми элементами подменю
  tailHTML - HTML-код, выводимый в конце блока, после всех элементов подменю
  itemDelimHTML - HTML-код, выводимый между элементами подменю
  itemHoverColor,itemHeadHTML,itemTailHTML,itemLinkClass,itemLinkAttrs - общие 
	параметры для элементов этого подменю, назначение - см. описание Item.
  rollover - подключаемый ролловер для элементов этого подменю, 
	или 0/null, если ролловер не нужен; подробнее см. в описании объекта 
	меню.
  items - массив объектов Item - элеметов данного подменю.

Внимание:
---------

1) Если атрибуты left,top (direction,alignment) имеют значение null, то они 
наследуют значения соответствующих групповых атрибутов, заданных для меню, 
а именно:
  - для подменю элемента верхнего уровня, hSubLeft,hSubTop;
  - для подменю элемента другого подменю, subLeft,subTop.

2) Если атрибут width имеет значение null, то он наследует значение 
атрибута subWidth, заданного для меню.
В конечном итоге, если он - положительное число, то подменю будет растягиваться 
в ширину (но не сужаться) до заданного значения; если он равен 0, то ширина 
подменю будет минимальная для того, чтобы все поместилось; если он равен пустой 
строке (''), то в нормальные браузеры будут стараться сделать его ширину 
как раз такой, чтобы элементы в нем не переносились на несколько строк, НН же 
максиматьно заузит меню, как если бы был задан 0 - поэтому рекомендуется все же 
это значение не задавать.

3) Если строчные атрибуты bgColor,hoverColor,headHTML,tailHTML,itemDelimHTML
имеют не строчное значение (например, 0, null или не заданы), то они наследуют 
значения атрибутов subBgColor,subHoverColor,subHeadHTML,subTailHTML,
itemDelimHTML, заданных для меню.

4) Если в конечном итоге параметр bgColor имеет пустое значение, то подменю 
имеет прозрачный фон (не имеет фона), и его результирующий фон - тот же, что у 
подложки.

5) Если в конечном итоге параметр hoverColor имеет пустое значение, то поменю 
не имеет подсветки, т.е. не меняет цвет фона при наводе.

--------------------------------------------------------------------------------

3. Объект DropDownMenu - главный объект меню.
---------------------------------------------

DropDownMenu(name,centeredWidth,delayOff,
	hSubLeft,hSubTop,subLeft,subTop,subWidth,
	bgColor,headHTML,tailHTML,hItemDelimHTML,
	subBgColor,subHoverColor,subHeadHTML,subTailHTML,itemDelimHTML,
	hItemHoverColor,hItemHeadHTML,hItemTailHTML,hItemLinkClass,hItemLinkAttrs,
	itemHoverColor,itemHeadHTML,itemTailHTML,itemLinkClass,itemLinkAttrs,
	rollover,items)

  name - имя меню (см. пояснения в начале).
  centeredWidth - при центрируемом дизайне ширина центрируемой части страницы 
	(например, таблицы, содержащей весь дизайн), иначе (т.ею если страница 
	без центрирования, выровнена влево) - задать 0.
  delayOff - задержка (в милисекундах) выключения элементов и их подменю при 
	уводе указателя мышки за пределы меню.
  headHTML - HTML-код, выводимый перед меню, т.е. перед всеми его элементами 
	верхнего уровня.
  tailHTML - HTML-код, выводимый после меню, т.е. после всех его элементов 
	верхнего уровня.
  hItemDelimHTML - HTML-код, выводимый между всеми его элементами верхнего 
	уровня.
  hSubLeft,hSubTop,subLeft,subTop,subWidth,
  subBgColor,subHoverColor,subHeadHTML,subTailHTML,itemDelimHTML - общие 
	параметры для всех подменю, назначение - см. описание SubMenu.
  bgColor,
  hItemHoverColor,hItemHeadHTML,hItemTailHTML,hItemLinkClass,hItemLinkAttrs,
  itemHoverColor,itemHeadHTML,itemTailHTML,itemLinkClass,itemLinkAttrs - общие 
	параметры для элементов меню и подменю, назначение - см. описание Item.
  rollover - подключаемый ролловер для элементов верхнего уровня, 
	или 0/null, если ролловер не нужен; подробнее см. ниже.
  items - массив объектов Item - элеметов верхнего уровня данного меню.

Методы:
-------
create() - создание меню на странице, должен вызываться в том месте, где нужно
	вывести меню.

Внимание:
---------

1) Если строчные атрибуты headHTML,tailHTML,hItemDelimHTML,
subHeadHTML,subTailHTML,itemDelimHTML, имеют не строчное значение (0/null), 
то они принимают следующие значения по умолчанию:
  headHTML='<table border=0 cellspacing=0 cellpadding=0><tr><td>'
  tailHTML='</td></tr></table>'
  hItemDelimHTML='</td><td>'
  subHeadHTML='<table border=0 cellspacing=0 cellpadding=0 width=100%><tr><td width=100%>'
  subTailHTML='</td></tr></table>'
  itemDelimHTML='</td></tr><tr><td width=100%>'
Значения по умолчанию элементы верхнего уровня располагают горизонтально, 
а в подменю - вертикально. Если есть желание заменить значения по умолчанию, то 
рекомендуется отталкиваться от этих значений по умолчанию, имея в виду, что:
  - для расположения элементов таблицы необходимы, т.к. все элементы лежат 
    в своих слоях;
  - при вертикальном расположении width=100% для таблицы и ячеек необходимы для
    нормальной работы меню в НН.

2) Если задан объект rollover, то его рисунки ставятся в соответствие элементам 
верхнего уровня меню (или элементам подменю для соотв. параметра SubMenu), 
и при переключении этих элементов происходит переключение соответствующих 
рисунков ролловера. Предполагается, что HTML-код этих рисунков задается 
в параметре text элементов (нужно не забыть дать правильные имена рисункам).
Параметр nn_document при создании ролловера не нужно задавать. Если какой-то 
элемент содержит не рисунок, а текст, то в массивах рисунков оъекта Rollover 
для соответствующего рисунка нужно задать 0.

!!!!! ВНИМАНИЕ: !!!!!
---------------------
В НН ролловеры работают, только если элемент лежит не глубже, чем в 1 таблице 
в текущем контексте, каким для элементов верхнего уровня является вся страница, 
а для элементов подменю - блок этого подменю.

--------------------------------------------------------------------------------

АВТОМАТИЧЕСКОЕ ОПРЕДЕЛЕНИЕ КООРДИНАТ ВЫПАДАЮЩЕГО ПОДМЕНЮ.
---------------------------------------------------------

Как было написано, если параметры left,top для подменю принимают строчные 
значения, то они трактуются как direction,alignment - направление выпадения 
подменю и выравнивание подмненю при выпадении относительно элемента-хозяина.
При таком относительном задании положения _всех_ подменю, параметр centeredWidth 
для меню, если страница центрируется, можно не задавать.
Формат и значения:

direction='[value][+/-offset]', где 
  value - буква, определяющая направление выпадения подменю:
	t - (top) вверх.
	b - (bottom) вниз.
	v - (vertical) вертикальное выпадение, вверх или вниз - выбирается 
	    автоматически в зависимости от положения меню на видимой части 
	    страницы (т.е. анализируется, поместится выпавшее подменю в видимую 
	    область окна), приоритетным направлением является "вниз".
	l - (left) влево.
	b - (right) вправо.
	h - (horizontal) горизонтальное выпадение, вправо или влево - выбирается 
	    автоматически в зависимости от положения меню на видимой части 
	    страницы (т.е. анализируется, поместится выпавшее подменю в видимую 
	    область окна), приоритетным является направление вправо.
	Если value не задано, то берется значение 'v' для подменю элементов верхнего 
	уровня, и 'h' для подменю элементов других подменю
  offset - смещение подменю в пикселах относительно элемента, из которого оно 
	выпадает, при вертикальном выпадении - по координате Y, при 
	горизонтальном - по X. Значение по умолчанию 0.
	Если направление задано 'v' или 'h' (т.е. реальное направление 
	выбирается автоматически), то при выпадении вверх или влево offset 
	не прибавляется к координате, а вычитается - т.е. смещение считается 
	как бы "относительным".

alignment='[value][+/-offset]', где
  value - буква, определяющая выравнивание подменю:
	b - (begin) по началу родительского элемента (по верху при вертикальном 
	    выпадении и по левому краю при горизонтальном).
	c - (center) по центру родительского элемента.
	e - (end) по окончанию родительского элемента (по низу при вертикальном 
	    выпадении и по правому краю при горизонтальном).
	a - (auto) выравнивание выбирается автоматически в зависимости 
	    от положения меню на видимой части  страницы (т.е. анализируется, 
	    поместится выпавшее подменю в видимую область окна), приоритетным 
	    является выравнивание по началу.
	Если value не задано, то берется значение 'b', если задан offset, 
	и значение 'a', если не задан. 
  offset - смещение подменю в пикселах относительно элемента, из которого оно 
	выпадает, при вертикальном выпадении - по координате X, при 
	горизонтальном - по Y. Значение по умолчанию 0.
	Если value равно 'a', то offset игнорируется.


================================================================================

